(this["webpackJsonpmusic-brainz-ql"]=this["webpackJsonpmusic-brainz-ql"]||[]).push([[0],{249:function(e,t,a){},252:function(e,t,a){"use strict";a.r(t);var n=a(311),r=a(149),i=a(0),c=a(10),s=a.n(c),o=a(101),l=a(49),u=a(19),d=a(289),j=a(292),h=a.p+"static/media/logo.971b74a3.svg",g=a(43),b=a(151),m=a(319),x=a(290),p=a(291),O=a(313),f=a(320),v=a(136),y=a.n(v),w=a(131),C=a.n(w),N=a(8),k=Object(N.a)((function(e){return{root:{"label + &":{marginTop:e.spacing(3)}},input:{borderRadius:0,position:"relative",backgroundColor:e.palette.background.paper,border:"0px solid #ced4da",fontSize:16,padding:"10px 26px 10px 12px",transition:e.transitions.create(["border-color","box-shadow"]),"&:focus":{borderRadius:4,borderColor:"#fffff",backgroundColor:"#ffffff",boxShadow:"255 255 255 0.2rem rgba(0,0,0,.25)"}}}}))(m.a),I="artist",A="genre",T=a(3),B=Object(d.a)((function(e){return{searchBox:{textAlign:"center",display:"flex",justifyContent:"center",borderRadius:50},searchField:{margin:e.spacing(1),flex:1},selectField:{margin:e.spacing(1)}}}));var q=function(e){var t=e.query,a=e.queryType,n=e.onQueryChange,r=e.onQueryTypeChange,c=e.onSubmit,s=e.className,o=B();s=s||{};var l=Object(u.f)(),d=Object(i.useState)(t||""),j=Object(g.a)(d,2),h=j[0],v=j[1],w=Object(i.useState)(a||I),N=Object(g.a)(w,2),q=N[0],W=N[1];return c=c||function(){h&&""!==h&&l.push("/search?query=".concat(h,"&type=").concat(q))},Object(T.jsxs)(b.a,{component:"form",id:"searchBox",className:C()(o.searchBox,s),variant:"outlined",children:[Object(T.jsx)(m.a,{id:"query",className:o.searchField,placeholder:"Search Artist",inputProps:{"aria-label":"search artist"},defaultValue:h||"",onChange:function(e){v(e.target.value),n&&n()},onKeyPress:function(e){"Enter"===e.key&&(e.preventDefault(),e.stopPropagation(),c())},startAdornment:Object(T.jsx)(x.a,{position:"start",children:Object(T.jsx)(y.a,{})})}),Object(T.jsx)(p.a,{orientation:"vertical",flexItem:!0}),Object(T.jsxs)(O.a,{id:"queryType",className:o.selectField,value:q||I,input:Object(T.jsx)(k,{}),onChange:function(e){W(e.target.value),r&&r()},children:[Object(T.jsx)(f.a,{value:I,children:"Artist"}),Object(T.jsx)(f.a,{value:A,children:"Genre"})]})]})},W=Object(d.a)((function(e){return{logoContainer:{textAlign:"center",marginTop:50},logo:{width:256},searchBox:{textAlign:"center",display:"flex",justifyContent:"center",borderRadius:50},searchField:{margin:e.spacing(1),flex:1},selectField:{margin:e.spacing(1)}}}));var S=function(){var e=W();return Object(T.jsxs)(j.a,{maxWidth:"sm",children:[Object(T.jsx)("div",{id:"logoContainer",className:e.logoContainer,children:Object(T.jsx)("img",{src:h,className:e.logo,alt:"MusicBrainz QL logo"})}),Object(T.jsx)(q,{})]})},F=a(30),L=a(108),P=a(302),R=a(54),H=a(301),D=a(303),z=a(255),$=a(293),G=a(137),M=a.n(G),V=Object(d.a)((function(){return{paper:{display:"flex",padding:10,justifyContent:"space-around",flexDirection:"column",placeItems:"center",width:"100%"},icon:{color:"#ba000d",margin:"16px 8px",height:24,width:24},messageArea:{display:"flex",justifyContent:"center",placeItems:"center"},message:{color:"#b2102f",margin:"16px 8px"}}}));var E=function(){var e=V();return Object(T.jsxs)(b.a,{elevation:3,className:e.paper,children:[Object(T.jsxs)("div",{className:e.messageArea,children:[Object(T.jsx)(M.a,{className:e.icon}),Object(T.jsx)(z.a,{className:e.message,variant:"h6",gutterBottom:!0,children:"Some thing went wrong"})]}),Object(T.jsx)($.a,{variant:"outlined",color:"secondary",onClick:function(){return window.location.reload()},children:"Retry"})]})},Q=a(294),J=a(295);var U=function(){return new URLSearchParams(Object(u.g)().search)},K=Object(d.a)((function(){return{appBar:{color:"#ba478f",background:"#ffffff"},logo:{width:48,height:48},searchForm:{width:"80vw",maxWidth:629,height:47,margin:"10px 20px"}}}));var X=function(e){var t=e.query,a=e.queryType,n=e.onSearch,r=K(),i=U();return Object(T.jsxs)(T.Fragment,{children:[Object(T.jsx)(Q.a,{position:"fixed",className:r.appBar,children:Object(T.jsxs)(J.a,{children:[Object(T.jsx)("img",{src:h,className:r.logo,alt:"Music Brainz QL"}),Object(T.jsx)(q,{query:t||i.get("query"),queryType:a||i.get("type"),onSubmit:n,className:r.searchForm})]})}),Object(T.jsx)(J.a,{})]})},Y=a(296),Z=a(297),_=a(298),ee=a(299),te=a(322),ae=a(138),ne=a.p+"static/media/artist.38d91297.svg",re=function(e){var t=atob(e),a=/arrayconnection:(\d+)/gm.exec(t);return a&&a.length>1?+a[1]:0},ie=function(e,t){return re(e)-re(t)===7},ce=Object(d.a)((function(){return{artistCard:{width:300,minWidth:200,maxHeight:"208px !important",margin:5},albumImages:{height:118,textAlign:"center",background:"lightgrey"},artistImage:{width:"auto",height:"100%"},caption:{maxWidth:"50%",overflow:"hidden",textOverflow:"ellipsis",display:"inline-block",whiteSpace:"nowrap"},rating:{float:"right",marginBottom:5}}}));var se=function(e){var t,a=e.artist,n=e.endCursor,r=e.onClick,i=e.onSeen,c=ce();return Object(T.jsx)(Y.a,{className:c.artistCard,children:Object(T.jsxs)(Z.a,{onClick:function(){return r(a.node.mbid)},children:[Object(T.jsx)(_.a,{className:c.albumImages,title:a.node.name,children:Object(T.jsx)("img",{alt:a.node.name,src:a.node.mediaWikiImages.length?a.node.mediaWikiImages[0].url:ne,className:c.artistImage})}),Object(T.jsxs)(ee.a,{children:[Object(T.jsx)(z.a,{variant:"h6",gutterBottom:!0,children:a.node.name}),Object(T.jsx)(z.a,{className:c.caption,variant:"caption",gutterBottom:!0,children:a.node.disambiguation}),Object(T.jsxs)(z.a,{className:c.rating,variant:"caption",display:"inline",gutterBottom:!0,children:["(",a.node.rating.voteCount||0,")"]}),Object(T.jsx)(te.a,{className:c.rating,size:"small",value:null===(t=a.node.rating)||void 0===t?void 0:t.value,readOnly:!0}),ie(n,a.cursor)&&Object(T.jsx)(ae.a,{onEnter:function(){return i(!0)}})]})]})})},oe=a(315),le=a(300),ue=Object(d.a)((function(){return{box:{width:300,minWidth:200,maxHeight:"208px !important",margin:5}}}));var de,je=function(){var e=ue();return Object(T.jsxs)(oe.a,{className:e.box,children:[Object(T.jsx)(le.a,{variant:"rect",width:"100%",height:118}),Object(T.jsx)(le.a,{variant:"text"}),Object(T.jsx)(le.a,{variant:"text",width:"60%"})]})},he=a(69),ge=a(314),be=Object(ge.a)(de||(de=Object(he.a)(["\nquery Artist($query: String!, $endCursor: String) {\n  search {\n    artists(query: $query, first: 15, after: $endCursor) {\n      ...artistsResults\n    }\n  }\n}\n\nfragment artistsResults on ArtistConnection {\n  pageInfo {\n    endCursor\n    hasNextPage\n  }\n  edges {\n    cursor\n    node {\n      mbid\n      name\n      disambiguation\n      type\n      mediaWikiImages {\n        url\n      }\n      rating {\n        voteCount\n        value\n      }\n    }\n  }\n}\n"]))),me=function(e,t){switch(t){case I:return'name: "'.concat(e,'"');case A:return'tag: "'.concat(e,'"');default:return e}},xe=Object(d.a)((function(){return{resultContainer:{display:"flex",flexWrap:"wrap",overflow:"hidden",justifyContent:"space-around",marginTop:20,padding:0},gridList:{height:"80vh",width:"100vw",justifyContent:"space-around"},artistCard:{width:300,minWidth:200,maxHeight:"208px !important",margin:5},albumImages:{height:118,textAlign:"center",background:"lightgrey"},artistImage:{width:"auto",height:"100%"}}}));var pe=function(){var e=xe(),t=U(),a=Object(u.f)(),n=Object(R.a)(),r=Object(H.a)(n.breakpoints.up("sm")),c=Object(i.useState)(!1),s=Object(g.a)(c,2),o=s[0],l=s[1],d=Object(P.a)(be,{errorPolicy:"ignore"}),h=Object(g.a)(d,2),b=h[0],m=h[1],x=m.loading,p=m.error,O=m.data,f=m.fetchMore,v=function(e){return a.push("/artist/".concat(e))},y=function(e){var a={query:me(t.get("query"),t.get("type"))};e?O.search.artists.pageInfo.hasNextPage&&(l(!0),f({variables:Object(L.a)(Object(L.a)({},a),{},{endCursor:O.search.artists.pageInfo.endCursor})})):b({variables:a})};return Object(i.useEffect)((function(){if(!t.get("query"))return a.push("/");y()}),[t.get("query"),t.get("type")]),Object(i.useEffect)((function(){l(!1)}),[O]),Object(T.jsxs)(T.Fragment,{children:[Object(T.jsx)(X,{}),Object(T.jsxs)(j.a,{maxWidth:"xl",className:e.resultContainer,children:[p&&Object(T.jsx)(E,{}),Object(T.jsxs)(D.a,{cellHeight:208,className:e.gridList,spacing:0,cols:r?5:2,children:[x&&!p&&Object(F.a)(new Array(50).keys()).map((function(e){return Object(T.jsx)(je,{},e)})),O&&!p&&O.search.artists.edges.map((function(e,t){return e.node&&Object(T.jsx)(se,{artist:e,endCursor:O.search.artists.pageInfo.endCursor,onClick:v,onSeen:y},t)})),o&&Object(F.a)(new Array(5).keys()).map((function(e){return Object(T.jsx)(je,{},e)}))]})]})]})},Oe=a(306),fe=a(141),ve=a.p+"static/media/album.32370559.svg",ye=Object(d.a)((function(){return{albumImages:{height:200,textAlign:"center",background:"lightgrey"},albumCard:{maxWidth:500,minWidth:"300px !important",width:350,maxHeight:300,margin:5},CardContent:{height:"100%"},titleTypography:{maxWidth:"50%",overflow:"hidden",textOverflow:"ellipsis",display:"inline-block",whiteSpace:"nowrap"}}}));var we=function(e){var t=e.title,a=e.photos,n=e.onClick,r=ye();return Object(T.jsxs)(Y.a,{className:r.albumCard,children:[Object(T.jsx)(_.a,{className:r.albumImages,children:Object(T.jsx)(fe.ReactPhotoCollage,{width:"100%",height:a&&a.length>4?["150px","50px"]:["200px"],layout:a&&a.length>4?[1,4]:[a.length],showNumOfRemainingPhotos:!0,photos:a.length>0?a:[{source:ve.default}]})}),Object(T.jsx)(Z.a,{onClick:n,children:Object(T.jsx)(ee.a,{children:Object(T.jsx)(z.a,{className:r.titleTypography,variant:"h5",gutterBottom:!0,children:t})})})]})},Ce=Object(d.a)((function(e){return{albumImages:{height:200,textAlign:"center",background:"lightgrey"},albumCard:{maxWidth:500,minWidth:"300px !important",maxHeight:300,margin:5}}}));var Ne,ke,Ie=function(){var e=Ce();return Object(T.jsxs)(Y.a,{className:e.albumCard,children:[Object(T.jsx)(_.a,{className:e.albumImages,children:Object(T.jsx)(le.a,{animation:"wave",variant:"rect",width:"300",height:"100%"})}),Object(T.jsx)(ee.a,{children:Object(T.jsx)(le.a,{width:100})})]})},Ae=a(307),Te=a(147),Be=a.n(Te),qe=Object(ge.a)(Ne||(Ne=Object(he.a)(["\n  query Artist($mbid: MBID!) {\n    lookup {\n      artist(mbid: $mbid) {\n        ...artistInfo\n      }\n    }\n  }\n\n  fragment artistInfo on Artist {\n    mbid\n    name\n    disambiguation\n    mediaWikiImages {\n      url\n    }\n    type\n    rating {\n      voteCount\n      value\n    }\n    releases(type: ALBUM, status: OFFICIAL) {\n      totalCount\n      nodes {\n        mbid\n        title\n        disambiguation\n        coverArtArchive {\n          artwork\n          images {\n            image\n            thumbnails {\n              large\n            }\n          }\n        }\n      }\n    }\n  }\n"]))),We=Object(ge.a)(ke||(ke=Object(he.a)(["\n  query Release($mbid: MBID!) {\n    lookup {\n      release(mbid: $mbid) {\n        mbid\n        title\n        recordings {\n          nodes {\n            mbid\n            title\n            length\n            rating {\n              value\n              voteCount\n            }\n          }\n        }\n      }\n    }\n  }\n"]))),Se=a(304),Fe=a(305),Le=a(86),Pe=a.n(Le),Re=Object(d.a)((function(){return{tile:{background:"lightgrey",width:200,height:200,minHeight:50,minWidth:50,margin:4},icon:{width:"100%",height:"100%"}}}));var He=function(e){var t=e.title,a=e.rateValue,n=e.voteCount,r=Re();return Object(T.jsxs)(Se.a,{className:r.tile,children:[Object(T.jsx)(Pe.a,{className:r.icon}),Object(T.jsx)(Fe.a,{title:t,subtitle:Object(T.jsxs)(T.Fragment,{children:[Object(T.jsx)(te.a,{value:a,size:"small",precision:.5,readOnly:!0}),n&&"(".concat(n,")")]})})]})},De=Object(d.a)((function(){return{tile:{background:"lightgrey",width:200,height:200,minHeight:50,minWidth:50,margin:4},subtitle:{height:68,width:200,background:"rgba(0, 0, 0, 0.5)",marginTop:-70,"& span":{marginLeft:16,marginRight:16}},icon:{width:"100%",height:"100%",color:"rgba(0,0,0, 0.50)"}}}));var ze=function(e){e.title,e.rateValue,e.voteCount;var t=De();return Object(T.jsxs)("div",{className:t.tile,children:[Object(T.jsx)(Pe.a,{className:t.icon}),Object(T.jsxs)("div",{className:t.subtitle,children:[Object(T.jsx)(le.a,{width:75}),Object(T.jsx)(le.a,{width:80,height:50})]})]})},$e=Object(d.a)((function(){return{appBar:{color:"#000000",background:"#ffffff",height:69},paper:{display:"flex",padding:10},trackTypography:{marginTop:20},tracksGridList:{width:"100%",justifyContent:"space-around"}}}));var Ge=function(e){var t=e.album,a=e.onClose,n=$e(),r=Object(Oe.a)(We,{variables:{mbid:t.mbid}}),i=r.loading,c=r.error,s=r.data;return Object(T.jsxs)(T.Fragment,{children:[Object(T.jsx)(Q.a,{className:n.appBar,children:Object(T.jsxs)(J.a,{children:[Object(T.jsx)(Ae.a,{edge:"start",color:"inherit",onClick:a&&a(),"aria-label":"close",children:Object(T.jsx)(Be.a,{})}),Object(T.jsxs)(z.a,{className:n.titleTypography,variant:"h4",gutterBottom:!0,children:[t.title," - Tracks"]})]})}),c&&Object(T.jsx)(E,{}),!c&&Object(T.jsx)(b.a,{elevation:3,className:n.paper,children:Object(T.jsxs)(D.a,{className:n.tracksGridList,cols:3,cellHeight:100,children:[i&&Object(F.a)(new Array(8).keys()).map((function(e){return Object(T.jsx)(ze,{},e+1)})),s&&function(){var e,t,a;return(null===s||void 0===s||null===(e=s.lookup)||void 0===e||null===(t=e.release)||void 0===t||null===(a=t.recordings)||void 0===a?void 0:a.nodes)||[]}().map((function(e){return Object(T.jsx)(He,{title:e.title,rateValue:e.rating.value,voteCount:e.rating.voteCount},e.mbid)}))]})})]})},Me=function(e){return e.coverArtArchive.artwork?e.coverArtArchive.images.reduce((function(e,t){return[].concat(Object(F.a)(e),[{source:t.thumbnails.large}])}),[]):[]},Ve=a(321),Ee=Object(d.a)((function(){return{box:{flexGrow:1,display:"flex",flexDirection:"row",alignItems:"center"},avatar:{margin:"10px 8px",width:96,height:96},nameTypography:{margin:"0 8px"},artistInfoBox:{display:"flex",flexDirection:"column"}}}));var Qe=function(e){var t=e.title,a=e.subtitle,n=e.avatarUri,r=e.rateValue,i=e.voteCount,c=Ee();return Object(T.jsxs)(oe.a,{className:c.box,children:[Object(T.jsx)(Ve.a,{className:c.avatar,alt:t,src:n}),Object(T.jsxs)(oe.a,{className:c.artistInfoBox,children:[Object(T.jsx)(z.a,{className:c.nameTypography,variant:"h5",gutterBottom:!0,children:t}),Object(T.jsx)(z.a,{className:c.nameTypography,variant:"caption",gutterBottom:!0,children:a}),Object(T.jsx)(te.a,{size:"large",value:r,precision:.5,readOnly:!0}),Object(T.jsxs)(z.a,{className:c.nameTypography,display:"inline",variant:"caption",gutterBottom:!0,children:["(",i,")"]})]})]})};var Je=function(){var e=Ee();return Object(T.jsxs)(oe.a,{className:e.box,children:[Object(T.jsx)(le.a,{className:e.avatar,variant:"circle",width:96,height:96}),Object(T.jsxs)(oe.a,{className:e.artistInfoBox,children:[Object(T.jsx)(le.a,{width:100}),Object(T.jsx)(le.a,{className:e.nameTypography,width:50,height:10}),Object(T.jsx)(le.a,{className:e.nameTypography,variant:"rect",width:100,height:20})]})]})},Ue=Object(d.a)((function(){return{container:{marginTop:20},paper:{display:"flex",padding:10},box:{flexGrow:1,display:"flex",flexDirection:"row",alignItems:"center"},avatar:{width:96,height:96,margin:"10px 8px"},nameTypography:{margin:"0 8px"},artistInfoBox:{display:"flex",flexDirection:"column"},albumTypography:{marginTop:20},albumImages:{height:200,textAlign:"center",background:"lightgrey","& div":{width:"auto"}},albumGridList:{width:"100%",justifyContent:"space-around"},albumCard:{maxWidth:500,minWidth:"300px !important",maxHeight:300}}}));var Ke=function(){var e,t,a,n,r,c,s,o,l=Ue(),d=Object(i.useState)(null),h=Object(g.a)(d,2),m=h[0],x=h[1],p=Object(u.h)().id,O=Object(Oe.a)(qe,{variables:{mbid:p}}),f=O.loading,v=O.error,y=O.data,w=function(){return y&&y.lookup.artist},C=function(e){return function(){return x(e)}};return Object(T.jsxs)(T.Fragment,{children:[Object(T.jsx)(X,{}),Object(T.jsxs)(j.a,{className:l.container,children:[!m&&(v?Object(T.jsx)(E,{}):Object(T.jsxs)(T.Fragment,{children:[Object(T.jsxs)(b.a,{elevation:3,className:l.paper,children:[f&&Object(T.jsx)(Je,{}),y&&Object(T.jsx)(Qe,{title:null===(e=w())||void 0===e?void 0:e.name,subtitle:null===(t=w())||void 0===t?void 0:t.disambiguation,avatarUri:(null===(a=w())||void 0===a?void 0:a.mediaWikiImages.length)?w().mediaWikiImages[0].url:ne,rateValue:null===(n=w())||void 0===n?void 0:n.rating.value,voteCount:null===(r=w())||void 0===r?void 0:r.rating.voteCount})]}),Object(T.jsx)(z.a,{className:l.albumTypography,variant:"h4",gutterBottom:!0,children:"Albums"}),Object(T.jsx)(b.a,{elevation:3,className:l.paper,children:Object(T.jsxs)(D.a,{className:l.albumGridList,cols:3,cellHeight:300,spacing:0,children:[f&&Object(F.a)(new Array(3).keys()).map((function(e){return Object(T.jsx)(Ie,{},e)})),y&&(null===(c=w())||void 0===c||null===(s=c.releases)||void 0===s||null===(o=s.nodes)||void 0===o?void 0:o.map((function(e){return Object(T.jsx)(we,{id:e.mbid,title:e.title,photos:Me(e),onClick:C(e)},e.mbid)})))]})})]})),m&&Object(T.jsx)(Ge,{album:m,onClose:C})]})]})};var Xe=function(){return Object(T.jsx)(l.a,{children:Object(T.jsxs)(u.c,{children:[Object(T.jsx)(u.a,{path:"/artist/:id",children:Object(T.jsx)(Ke,{})}),Object(T.jsx)(u.a,{path:"/search",children:Object(T.jsx)(pe,{})}),Object(T.jsx)(u.a,{path:"/",children:Object(T.jsx)(S,{})})]})})};var Ye=function(){return Object(T.jsx)(Xe,{})},Ze=(a(249),function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,323)).then((function(t){var a=t.getCLS,n=t.getFID,r=t.getFCP,i=t.getLCP,c=t.getTTFB;a(e),n(e),r(e),i(e),c(e)}))}),_e=a(312),et=a(316),tt=new _e.a({uri:"http://api.ql.tavanarad.ir/",fetchOptions:{mode:"no-cors"},connectToDevTools:!0,cache:new et.a({typePolicies:{Query:{fields:{search:{keyArgs:[],merge:function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=arguments.length>1?arguments[1]:void 0,n=arguments.length>2?arguments[2]:void 0;if(!t||!Object.keys(t).length||!n.variables.endCursor)return a;var r=JSON.parse(JSON.stringify(t)),i=Object.keys(t)[1],c=Object.keys(a)[1];return r[i].pageInfo=a[c].pageInfo,(e=r[i].edges).push.apply(e,Object(F.a)(a[c].edges)),r}}}}}})}),at=Object(r.a)();s.a.render(Object(T.jsx)(o.ThemeProvider,{theme:at,children:Object(T.jsx)(n.a,{client:tt,children:Object(T.jsx)(Ye,{})})}),document.getElementById("root")),Ze()}},[[252,1,2]]]);
//# sourceMappingURL=main.da34465e.chunk.js.map